"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[994],{48994:function(Fe,L,_){_.r(L),_.d(L,{RoutesModule:function(){return Ee}});var b=_(43144),y=_(15671),f=_(69808),G=_(99291),Z=_(60136),w=_(57777),U=_(27153),B=_(86087),M=_(92181),I=_(17140),R=_(28258),T=_(90149),p=function(){return(r=p||(p={})).GET_ALL_MESSAGES="GET_ALL_MESSAGES",r.SEND_FILTER="SEND_FILTER",r.SEND_FREE_TEXT_FILTER="SEND_FREE_TEXT_FILTER",r.REMOVE_FILTER="REMOVE_FILTER",r.REMOVE_ALL_FILTERS="REMOVE_ALL_FILTERS",r.SELECT_SEGMENT="SELECT_SEGMENT",r.SELECT_MESSAGE="SELECT_MESSAGE",r.SAVE_VALUE="SAVE_VALUE",r.DOWNLOAD_MESSAGE="DOWNLOAD_MESSAGE",r.DOWNLOAD_ALL_MESSAGES="DOWNLOAD_ALL_MESSAGES",p;var r}(),q=_(92340),J=_(35226),k=_.n(J),e=_(91891),j=_(48714),z=function(){var r=function(){function c(o){(0,y.Z)(this,c),this._messageGateway=o}return(0,b.Z)(c,[{key:"getGroupMessages",value:function(a,n,t,i){return this._messageGateway.getGroupMessages(a,n,t,i)}},{key:"getSearchMessages",value:function(a,n,t){return this._messageGateway.getSearchMessages(a,n,t)}},{key:"getFiltersMessages",value:function(a,n,t,i,s,l){return this._messageGateway.getFiltersMessages(a,n,t,i,s,l)}},{key:"updateMesssage",value:function(a){return this._messageGateway.updateMessage(a)}}]),c}();return r.\u0275fac=function(o){return new(o||r)(e.LFG(j.f))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),Q=_(74592),V=function(){var r=function(){function c(o){(0,y.Z)(this,c),this._groupGateway=o}return(0,b.Z)(c,[{key:"getGroupsForUser",value:function(a){return this._groupGateway.getGroupsForUser(a)}},{key:"deleteGroupMessages",value:function(a,n){return this._groupGateway.deleteGroupMessages(a,n)}},{key:"downloadGroupMessages",value:function(a,n){return this._groupGateway.downloadGroupMessages(a,n)}},{key:"changeMessagesRegisteredUser",value:function(a,n,t){return this._groupGateway.changeMessagesRegisteredUser(a,n,t)}},{key:"updateGroupName",value:function(a,n,t){return this._groupGateway.updateGroupName(a,n,t)}}]),c}();return r.\u0275fac=function(o){return new(o||r)(e.LFG(Q.N))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),Y=_(29633),H=_(57261),E=_(73237),A=_(61120),O=_(45037),S=_(93075),W=_(67322),X=_(77531),N=_(47423);function K(r,c){if(1&r){var o=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"button",16),e.NdJ("click",function(){var i=e.CHM(o).index;return e.oxw().remove_filter(i)}),e.TgZ(3,"i",5),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"span",17)(6,"b"),e._uU(7),e.qZA()(),e.TgZ(8,"div",18)(9,"i",5),e._uU(10),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()()()()}if(2&r){var a=c.$implicit;e.xp6(1),e.Q6J("ngClass",a.name),e.xp6(6),e.AsE("",a.index,": ",a.value,""),e.xp6(3),e.hij(" ","free_text_search"==a.name?"manage_search":"search_by_field_value"==a.name?"text_fields":"search_by_component_value"==a.name?"grid_view":"search_by_subcomponent_value"==a.name?"apps":"segment"," "),e.xp6(2),e.Oqu(a.name)}}var ee=function(){var r=function(c){(0,Z.Z)(a,c);var o=(0,w.Z)(a);function a(){var n;return(0,y.Z)(this,a),(n=o.call(this))._EMPTY="",n.filterValue=n._EMPTY,n}return(0,b.Z)(a,[{key:"ngAfterViewInit",value:function(){(0,E.Z)((0,A.Z)(a.prototype),"init",this).call(this),this._initialize()}},{key:"getSmartComponent",value:function(){return this.smartComponent}},{key:"sendFilter",value:function(){this.emit(p.SEND_FREE_TEXT_FILTER,this.filterValue),this.filterValue=this._EMPTY}},{key:"remove_filter",value:function(t){this.emit(p.REMOVE_FILTER,t)}},{key:"remove_all_filters",value:function(){this.emit(p.REMOVE_ALL_FILTERS)}},{key:"_initialize",value:function(){this.emit(p.GET_ALL_MESSAGES)}}]),a}(O.G);return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-filter-view"]],inputs:{smartComponent:"smartComponent",filterQueue:"filterQueue"},features:[e.qOj],decls:29,vars:2,consts:[[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-header","card-header-rose","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"card-body"],["method","#","action","#"],[1,"example-full-width"],["name","filterValue","matInput","","placeholder","Enter the value to search","type","text",3,"ngModel","ngModelChange","keyup.enter"],[1,"card-footer"],["mat-raised-button","","type","submit",1,"btn","btn-fill","btn-rose",3,"click"],["class","col-md-4 filter",4,"ngFor","ngForOf"],[1,"col-md-4","filter"],[1,"alert",3,"ngClass"],["mat-button","","type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],[1,"txt-filter"],[1,"name_filter"]],template:function(o,a){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"i",5),e._uU(6,"search"),e.qZA()(),e.TgZ(7,"h4",6),e._uU(8,"Value Search"),e.qZA()(),e.TgZ(9,"div",7)(10,"form",8)(11,"mat-form-field",9)(12,"input",10),e.NdJ("ngModelChange",function(t){return a.filterValue=t})("keyup.enter",function(){return a.sendFilter()}),e.qZA()()()(),e.TgZ(13,"div",11)(14,"button",12),e.NdJ("click",function(){return a.sendFilter()}),e._uU(15,"Search "),e.qZA()()()(),e.TgZ(16,"div",1)(17,"div",2)(18,"div",3)(19,"div",4)(20,"i",5),e._uU(21,"filter_alt"),e.qZA()(),e.TgZ(22,"h4",6),e._uU(23,"Filters"),e.qZA()(),e.TgZ(24,"div",7),e.YNc(25,K,13,5,"div",13),e.qZA(),e.TgZ(26,"div",11)(27,"button",12),e.NdJ("click",function(){return a.remove_all_filters()}),e._uU(28," Clear All "),e.qZA()()()()()),2&o&&(e.xp6(12),e.Q6J("ngModel",a.filterValue),e.xp6(13),e.Q6J("ngForOf",a.filterQueue))},directives:[S._Y,S.JL,S.F,W.KE,X.Nt,S.Fj,S.JJ,S.On,N.lW,f.sg,f.mk],styles:["div.dataTables_wrapper div.dataTables_info {\r\n    display: none !important;\r\n}\r\n  .dataTables_filter {\r\n    display: none !important;\r\n}\r\n  .table-responsive {\r\n    height: 350px !important;\r\n    overflow-y: auto;\r\n}\r\n\r\n.container-search[_ngcontent-%COMP%] {\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 20px;\r\n}\r\n.container-search[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] {\r\n    width: 400px;\r\n}\r\n.container-search[_ngcontent-%COMP%]   .container-btn-filters[_ngcontent-%COMP%] {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 10px;\r\n\r\n}\r\n.container-search[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%] {\r\n    display: flex;\r\n    gap: 10px;\r\n    border: 1px solid black;\r\n    border-radius: 5px;\r\n\r\n}\r\n.container-search[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\r\n    margin: 0;\r\n}\r\n.container-search[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%] {\r\n    border: none;\r\n    width: 50px;\r\n    height: 100%;\r\n    background-color: #fc3d5c;\r\n    border-radius: 5px;\r\n}\r\n.container-table[_ngcontent-%COMP%] {\r\n    width: 90%;\r\n    max-height: 500px;\r\n    overflow: auto;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n}\r\n.container-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\r\n    width: 100%;\r\n}\r\n.row-field[_ngcontent-%COMP%] {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n.col-btn-toggle[_ngcontent-%COMP%] {\r\n    width: 50px;\r\n    border-right: 1px solid black;\r\n}\r\n.col-field-index[_ngcontent-%COMP%] {\r\n    width: 100px;\r\n    height: 100%;\r\n    text-align: center;\r\n    border-right: 1px solid black;\r\n}\r\n.col-field-value[_ngcontent-%COMP%] {\r\n    width: 300px;\r\n}\r\n.col-input[_ngcontent-%COMP%] {\r\n    padding-left: 40px;\r\n}\r\n.hide-edit[_ngcontent-%COMP%] {\r\n    display: none;\r\n}\r\n.press[_ngcontent-%COMP%]:active {\r\n    background-color: #f2f2f2;\r\n}\r\n.active[_ngcontent-%COMP%] {\r\n    background-color: #f2f2f2;\r\n}\r\n.container-view[_ngcontent-%COMP%] {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 20px;\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    margin-top: 30px;\r\n}\r\n.container-message-paginator[_ngcontent-%COMP%] {\r\n    width: 30%;\r\n}\r\n.container-table-messages[_ngcontent-%COMP%] {\r\n    max-height: 200px;\r\n    overflow: auto;\r\n    padding: 20px;\r\n\r\n}\r\n.container-table-messages[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\r\n    width: 100%;\r\n}\r\n.container-table-tree[_ngcontent-%COMP%] {\r\n    width: 65%;\r\n    max-height: 300px;\r\n    overflow: auto;\r\n    padding: 20px;\r\n\r\n}\r\n.container-table-tree[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\r\n    width: 100%;\r\n}\r\n.btn-download[_ngcontent-%COMP%] {\r\n    width: 100%;\r\n    margin-top: 10px;\r\n}\r\n.container-filters[_ngcontent-%COMP%] {\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    margin-top: 30px;\r\n    padding-bottom: 50px;\r\n}\r\n.example-button-container[_ngcontent-%COMP%] {\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 120px;\r\n}\r\n.example-action-buttons[_ngcontent-%COMP%] {\r\n    padding-bottom: 20px;\r\n}\r\n.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%] {\r\n    flex-basis: 0;\r\n}\r\n.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%] {\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]    + .mat-form-field[_ngcontent-%COMP%] {\r\n    margin-left: 8px;\r\n}\r\n@media only screen and (max-width: 768px) {\r\n    .container-view[_ngcontent-%COMP%]   .container-message-paginator[_ngcontent-%COMP%] {\r\n        display: block;\r\n        width: 100%;\r\n    }\r\n\r\n    .container-view[_ngcontent-%COMP%]   .container-table-tree[_ngcontent-%COMP%] {\r\n        width: 100%;\r\n    }\r\n\r\n}\r\n.name_filter[_ngcontent-%COMP%] {\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    margin-top: 10px;\r\n}\r\n.txt-filter[_ngcontent-%COMP%] {\r\n    color: black;\r\n}\r\n.close[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\r\n    color: black !important;\r\n}\r\n.free_text_search[_ngcontent-%COMP%] {\r\n    background-color: white;\r\n    border: 2px solid #9c27b0;\r\n}\r\n.search_by_field_value[_ngcontent-%COMP%] {\r\n    background-color: white;\r\n    border: 2px solid #00bcd4;\r\n}\r\n.search_by_component_value[_ngcontent-%COMP%] {\r\n    background-color: white;\r\n    border: 2px solid #4caf50;\r\n}\r\n.search_by_subcomponent_value[_ngcontent-%COMP%]{\r\n    background-color: white;\r\n    border: 2px solid #ff9800;\r\n}\r\n.search_by_value_segment[_ngcontent-%COMP%]{\r\n    background-color: white;\r\n    border: 2px solid #f44336;\r\n}"]}),r}(),F=_(26770);function te(r,c){if(1&r&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&r){var o=c.$implicit;e.xp6(1),e.hij(" ",o," ")}}var ne=function(c){return{"active-segment":c}};function ie(r,c){if(1&r){var o=e.EpF();e.TgZ(0,"tr",14),e.NdJ("click",function(){var s=e.CHM(o).index;return e.oxw().clickPrincipal(s)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()}if(2&r){var a=c.$implicit,n=c.index;e.Q6J("ngClass",e.VKq(5,ne,0===n)),e.uIk("id","segment-"+n),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(a.title_segment),e.xp6(2),e.Oqu(a.segment)}}function ae(r,c){1&r&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"ngx-skeleton-loader",15),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngx-skeleton-loader",15),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"ngx-skeleton-loader",15),e.qZA()())}var se=function(){var r=function(c){(0,Z.Z)(a,c);var o=(0,w.Z)(a);function a(){var n;return(0,y.Z)(this,a),(n=o.call(this)).mainMessageTable={headerRow:[],dataRows:[]},n}return(0,b.Z)(a,[{key:"ngAfterViewInit",value:function(){(0,E.Z)((0,A.Z)(a.prototype),"init",this).call(this),this._initialize()}},{key:"getSmartComponent",value:function(){return this.smartComponent}},{key:"_initialize",value:function(){}},{key:"clickPrincipal",value:function(t){var i;this.emit(p.SELECT_SEGMENT,t),document.querySelectorAll(".active-segment").forEach(function(l){l.classList.remove("active-segment")}),null===(i=document.getElementById("segment-"+t.toString()))||void 0===i||i.classList.toggle("active-segment")}}]),a}(O.G);return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-main-table-messages"]],inputs:{smartComponent:"smartComponent",mainMessageTable:"mainMessageTable"},features:[e.qOj],decls:18,vars:3,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-icon","card-header-rose"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"card-body"],[1,"table-responsive"],[1,"table"],[1,"text-primary"],[4,"ngFor","ngForOf"],["class","segment",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"segment",3,"ngClass","click"],["count","7"]],template:function(o,a){1&o&&(e.TgZ(0,"section",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"i",5),e._uU(6,"assignment"),e.qZA()(),e.TgZ(7,"h4",6),e._uU(8,"Segments"),e.qZA()(),e.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead",10)(13,"tr"),e.YNc(14,te,2,1,"th",11),e.qZA()(),e.TgZ(15,"tbody"),e.YNc(16,ie,7,7,"tr",12),e.YNc(17,ae,7,0,"tr",13),e.qZA()()()()()()()),2&o&&(e.xp6(14),e.Q6J("ngForOf",a.mainMessageTable.headerRow),e.xp6(2),e.Q6J("ngForOf",null==a.mainMessageTable?null:a.mainMessageTable.dataRows),e.xp6(1),e.Q6J("ngIf",0===(null==a.mainMessageTable?null:a.mainMessageTable.dataRows.length)))},directives:[f.sg,f.mk,f.O5,F.xr],styles:[".segment[_ngcontent-%COMP%] {\r\n    cursor: pointer;\r\n}\r\n\r\n.active-segment[_ngcontent-%COMP%] {\r\n    background: linear-gradient(60deg, #ec407a, #d81b60);\r\n}"]}),r}(),D=_(25245);function re(r,c){if(1&r&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&r){var o=c.$implicit;e.xp6(1),e.hij(" ",o," ")}}var oe=function(c){return{"active-message":c}};function le(r,c){if(1&r){var o=e.EpF();e.TgZ(0,"tr",13),e.NdJ("click",function(){var l=e.CHM(o).index;return e.oxw().clickMessages(l)}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",14),e.NdJ("click",function(){var l=e.CHM(o).$implicit;return e.oxw().downloadMessage(l.id)}),e.TgZ(7,"mat-icon"),e._uU(8,"download"),e.qZA()()()()}if(2&r){var a=c.$implicit,n=c.index,t=e.oxw();e.Q6J("ngClass",e.VKq(4,oe,0===n)),e.uIk("id","message-"+n),e.xp6(2),e.Oqu((t.page_num-1)*t.page_size+(n+1)),e.xp6(2),e.Oqu(a.message.slice(0,30))}}function ce(r,c){1&r&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"ngx-skeleton-loader",15),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngx-skeleton-loader",15),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"ngx-skeleton-loader",15),e.qZA()())}function ue(r,c){1&r&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"ngx-skeleton-loader",15),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngx-skeleton-loader",15),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"ngx-skeleton-loader",15),e.qZA()())}function de(r,c){1&r&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"ngx-skeleton-loader",15),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngx-skeleton-loader",15),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"ngx-skeleton-loader",15),e.qZA()())}var ge=function(){var r=function(c){(0,Z.Z)(a,c);var o=(0,w.Z)(a);function a(){var n;return(0,y.Z)(this,a),(n=o.call(this)).page_size=10,n.page_num=1,n.messagePagingTable={headerRow:[],dataRows:[]},n}return(0,b.Z)(a,[{key:"ngAfterViewInit",value:function(){(0,E.Z)((0,A.Z)(a.prototype),"init",this).call(this)}},{key:"getSmartComponent",value:function(){return this.smartComponent}},{key:"clickMessages",value:function(t){var i;this.emit(p.SELECT_MESSAGE,t),document.querySelectorAll(".active-message").forEach(function(l){l.classList.remove("active-message")}),null===(i=document.getElementById("message-"+t.toString()))||void 0===i||i.classList.toggle("active-message")}},{key:"downloadMessage",value:function(t){this.emit(p.DOWNLOAD_MESSAGE,t)}},{key:"downloadAllMessages",value:function(){this.emit(p.DOWNLOAD_ALL_MESSAGES)}}]),a}(O.G);return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-message-paging-table"]],inputs:{smartComponent:"smartComponent",messagePagingTable:"messagePagingTable",pagination:"pagination"},features:[e.qOj],decls:20,vars:6,consts:[[1,"card"],[1,"card-header","card-header-primary","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"card-body"],[1,"table-responsive"],[1,"table"],[1,"text-primary"],[4,"ngFor","ngForOf"],["class","message",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-block","btn-info","mt-1",3,"click"],[1,"message",3,"ngClass","click"],["mat-icon-button","",3,"click"],["count","1"]],template:function(o,a){var n;1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"i",3),e._uU(4,"assignment"),e.qZA()(),e.TgZ(5,"h4",4),e._uU(6),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"table",7)(10,"thead",8)(11,"tr"),e.YNc(12,re,2,1,"th",9),e.qZA()(),e.TgZ(13,"tbody"),e.YNc(14,le,9,6,"tr",10),e.YNc(15,ce,7,0,"tr",11),e.YNc(16,ue,7,0,"tr",11),e.YNc(17,de,7,0,"tr",11),e.qZA()()(),e.TgZ(18,"button",12),e.NdJ("click",function(){return a.downloadAllMessages()}),e._uU(19,"Download All"),e.qZA()()()),2&o&&(e.xp6(6),e.hij(" Total messages: ",null!==(n=null==a.pagination?null:a.pagination.countDocuments)&&void 0!==n?n:"0"," "),e.xp6(6),e.Q6J("ngForOf",a.messagePagingTable.headerRow),e.xp6(2),e.Q6J("ngForOf",a.messagePagingTable.dataRows),e.xp6(1),e.Q6J("ngIf",0===a.messagePagingTable.dataRows.length),e.xp6(1),e.Q6J("ngIf",0===a.messagePagingTable.dataRows.length),e.xp6(1),e.Q6J("ngIf",0===a.messagePagingTable.dataRows.length))},directives:[f.sg,f.mk,N.lW,D.Hw,f.O5,F.xr],styles:[".message[_ngcontent-%COMP%] {\r\n    cursor: pointer;\r\n}\r\n\r\n.active-message[_ngcontent-%COMP%] {\r\n    background: linear-gradient(60deg, #ab47bc, #8e24aa);\r\n}"]}),r}();function _e(r,c){if(1&r){var o=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){var t=e.CHM(o).item;return e.oxw().editValue(t)}),e._uU(1," Edit Value "),e.qZA(),e.TgZ(2,"button",14),e.NdJ("click",function(){var t=e.CHM(o).item;return e.oxw().search_filter_by_field_value(t)}),e._uU(3," Search Filter By Field Value "),e.qZA(),e.TgZ(4,"button",15),e.NdJ("click",function(){var t=e.CHM(o).item;return e.oxw().search_filter_by_component_value(t)}),e._uU(5," Search Filter By Component Value "),e.qZA(),e.TgZ(6,"button",16),e.NdJ("click",function(){var t=e.CHM(o).item;return e.oxw().search_filter_by_subcomponent_value(t)}),e._uU(7," Search Filter By Subcomponent Value "),e.qZA(),e.TgZ(8,"button",17),e.NdJ("click",function(){var t=e.CHM(o).item;return e.oxw().free_text_search_filter_with_rigth_click(t)}),e._uU(9," Free Text Search Filter "),e.qZA(),e.TgZ(10,"button",18),e.NdJ("click",function(){var t=e.CHM(o).item;return e.oxw().search_filter_by_value_segment(t)}),e._uU(11," Search Filter By Value Segment "),e.qZA()}}function me(r,c){1&r&&(e.TgZ(0,"table",19)(1,"tr")(2,"td"),e._UZ(3,"ngx-skeleton-loader",20),e.qZA()()())}function pe(r,c){if(1&r){var o=e.EpF();e.TgZ(0,"mat-tree-node",21),e.NdJ("contextmenu",function(t){var s=e.CHM(o).$implicit;return e.oxw().onRightClick(t,{content:s})}),e.ynx(1,22),e.TgZ(2,"tr",23),e._UZ(3,"th",24),e.TgZ(4,"th",25),e._uU(5),e.qZA(),e.TgZ(6,"th",26),e._UZ(7,"button",27),e._uU(8),e.qZA(),e.TgZ(9,"th",28)(10,"input",29),e.NdJ("keypress",function(t){return e.CHM(o),e.oxw().check(t)}),e.qZA()(),e.TgZ(11,"th",30)(12,"button",31),e.NdJ("click",function(){var i=e.CHM(o).$implicit;return e.oxw().saveValue({content:i})}),e.TgZ(13,"mat-icon"),e._uU(14,"save"),e.qZA()()(),e.TgZ(15,"th",32)(16,"button",33),e.NdJ("click",function(){var i=e.CHM(o).$implicit;return e.oxw().cancelEdit({content:i})}),e.TgZ(17,"mat-icon"),e._uU(18,"cancel"),e.qZA()()()(),e.BQk(),e.qZA()}if(2&r){var a=c.$implicit;e.s9C("id",a.index),e.xp6(5),e.Oqu(a.index),e.xp6(3),e.hij(" ",a.value," "),e.xp6(2),e.s9C("value",a.value),e.Q6J("id",a.index+"-input")}}function he(r,c){if(1&r){var o=e.EpF();e.TgZ(0,"mat-tree-node",34),e.NdJ("contextmenu",function(i){var l=e.CHM(o).$implicit;return e.oxw().onRightClick(i,{content:l})}),e.ynx(1,22),e.TgZ(2,"tr",23)(3,"th",24)(4,"button",35)(5,"mat-icon",36),e._uU(6),e.qZA()()(),e.TgZ(7,"th",25),e._uU(8),e.qZA(),e.TgZ(9,"th",26),e._UZ(10,"button",27),e._uU(11),e.qZA()(),e.BQk(),e.qZA()}if(2&r){var a=c.$implicit,n=e.oxw();e.xp6(4),e.uIk("aria-label","Toggle "+a.name),e.xp6(2),e.hij(" ",n.treeControl.isExpanded(a)?"expand_more":"chevron_right"," "),e.xp6(2),e.Oqu(a.index),e.xp6(3),e.hij(" ",a.value," ")}}var fe=function(){var r=function(c){(0,Z.Z)(a,c);var o=(0,w.Z)(a);function a(){var n;return(0,y.Z)(this,a),(n=o.call(this)).selected_segment="",n.menuTopLeftPosition={x:"0",y:"0"},n._transformer=function(t,i){return{value:t.value,segment:t.segment,position:t.position,field_index:t.field_index,index:t.index,level:i,expandable:!!t.children&&t.children.length>0}},n.treeControl=new R.C2(function(t){return t.level},function(t){return t.expandable}),n.treeFlattener=new T.JZ(n._transformer,function(t){return t.level},function(t){return t.expandable},function(t){return t.children}),n.dataSource=new T.kc(n.treeControl,n.treeFlattener),n.hasChild=function(t,i){return i.expandable},n.fields=[],n}return(0,b.Z)(a,[{key:"getSmartComponent",value:function(){return this.smartComponent}},{key:"ngAfterViewInit",value:function(){(0,E.Z)((0,A.Z)(a.prototype),"init",this).call(this)}},{key:"ngOnChanges",value:function(t){this.buildTreeField()}},{key:"buildTreeField",value:function(){var t=this,i=[];this.fields.forEach(function(s,l){if(s.components.length>0){var u=[];s.components.forEach(function(g){if(g.subcomponents.length>0){var d=[];g.subcomponents.forEach(function(m){d.push({value:m.subcomponent?m.subcomponent:null,segment:t.selected_segment,field_index:g.field_index,position:m.position,index:g.index})}),u.push({value:g.component?g.component:null,segment:t.selected_segment,field_index:g.field_index,position:g.position,index:g.index,children:[].concat(d)})}else u.push({value:g.component?g.component:null,segment:t.selected_segment,field_index:g.field_index,position:g.position,index:g.index})}),i.push({value:s.field,field_index:s.position,position:s.position,segment:t.selected_segment,index:s.index,children:[].concat(u)})}else i.push({value:s.field,segment:t.selected_segment,field_index:s.position,position:s.position,index:s.index})}),this.dataSource.data=i}},{key:"onRightClick",value:function(t,i){var s;t.preventDefault(),this.menuTopLeftPosition.x=t.clientX+"px",this.menuTopLeftPosition.y=t.clientY+"px",this.matMenuTrigger.menuData={item:i},null===(s=this.matMenuTrigger)||void 0===s||s.openMenu(),this.disableButtons(i)}},{key:"check",value:function(t){var i=document.all?t.keyCode:t.which;if(8==i)return!0;var l=String.fromCharCode(i);return/[A-Za-z0-9]/.test(l)}},{key:"saveValue",value:function(t){var i=document.getElementById(t.content.index+"-input");this.emit(p.SAVE_VALUE,{input:i,item:t})}},{key:"disableButtons",value:function(t){var i,s,l,u,g;t.content.expandable&&(null===(i=document.getElementById("edit_value"))||void 0===i||i.setAttribute("disabled","")),0==t.content.level&&(null===(s=document.getElementById("search_filter_by_component_value"))||void 0===s||s.setAttribute("disabled",""),null===(l=document.getElementById("search_filter_by_subcomponent_value"))||void 0===l||l.setAttribute("disabled","")),1==t.content.level&&(null===(u=document.getElementById("search_filter_by_field_value"))||void 0===u||u.setAttribute("disabled",""),null===(g=document.getElementById("search_filter_by_subcomponent_value"))||void 0===g||g.setAttribute("disabled",""))}},{key:"editValue",value:function(t){var i,s,l,u,g=null===(i=document.getElementById(t.content.index))||void 0===i?void 0:i.childNodes[0].childNodes[2],d=null===(s=document.getElementById(t.content.index))||void 0===s?void 0:s.childNodes[0].childNodes[3],m=null===(l=document.getElementById(t.content.index))||void 0===l?void 0:l.childNodes[0].childNodes[4],h=null===(u=document.getElementById(t.content.index))||void 0===u?void 0:u.childNodes[0].childNodes[5];g.classList.toggle("hide-edit"),d.classList.toggle("hide-edit"),m.classList.toggle("hide-edit"),h.classList.toggle("hide-edit")}},{key:"cancelEdit",value:function(t){var i,s,l,u,g=null===(i=document.getElementById(t.content.index))||void 0===i?void 0:i.childNodes[0].childNodes[2],d=null===(s=document.getElementById(t.content.index))||void 0===s?void 0:s.childNodes[0].childNodes[3],m=null===(l=document.getElementById(t.content.index))||void 0===l?void 0:l.childNodes[0].childNodes[4],h=null===(u=document.getElementById(t.content.index))||void 0===u?void 0:u.childNodes[0].childNodes[5];g.classList.toggle("hide-edit"),d.classList.toggle("hide-edit"),m.classList.toggle("hide-edit"),h.classList.toggle("hide-edit")}},{key:"search_filter_by_field_value",value:function(t){this.emit(p.SEND_FILTER,{item:t,name_filter:"search_by_field_value"})}},{key:"search_filter_by_component_value",value:function(t){this.emit(p.SEND_FILTER,{item:t,name_filter:"search_by_component_value"})}},{key:"search_filter_by_subcomponent_value",value:function(t){this.emit(p.SEND_FILTER,{item:t,name_filter:"search_by_subcomponent_value"})}},{key:"free_text_search_filter_with_rigth_click",value:function(t){this.emit(p.SEND_FILTER,{item:t,name_filter:"free_text_search"})}},{key:"search_filter_by_value_segment",value:function(t){this.emit(p.SEND_FILTER,{item:t,name_filter:"search_by_value_segment"})}}]),a}(O.G);return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-field-tree-segment"]],viewQuery:function(o,a){var n;1&o&&(e.Gf(M.p6,5),e.Gf(M.p6,5)),2&o&&(e.iGM(n=e.CRH())&&(a.matMenuTrigger=n.first),e.iGM(n=e.CRH())&&(a.matMenuMessageTrigger=n.first))},inputs:{smartComponent:"smartComponent",fields:"fields",selected_segment:"selected_segment",pagination:"pagination"},features:[e.qOj,e.TTD],decls:16,vars:10,consts:[[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["rightMenu","matMenu"],["matMenuContent",""],[1,"card"],[1,"card-header","card-header-warning","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"card-body"],["style","width: 100%",4,"ngIf"],[3,"dataSource","treeControl"],["matTreeNodePadding","","style","border: 1px solid black",3,"id","contextmenu",4,"matTreeNodeDef"],["matTreeNodePadding","","style","border: 1px solid black",3,"contextmenu",4,"matTreeNodeDef","matTreeNodeDefWhen"],["id","edit_value","mat-menu-item","",3,"click"],["id","search_filter_by_field_value","mat-menu-item","",3,"click"],["id","search_filter_by_component_value","mat-menu-item","",3,"click"],["id","search_filter_by_subcomponent_value","mat-menu-item","",3,"click"],["id","free_text_search_filter_with_rigth_click","mat-menu-item","",3,"click"],["id","search_filter_by_value_segment","mat-menu-item","",3,"click"],[2,"width","100%"],["count","10"],["matTreeNodePadding","",2,"border","1px solid black",3,"id","contextmenu"],[1,"container-rows-field"],[1,"row-field"],[1,"col-btn-toggle"],[1,"col-field-index"],[1,"col-field-value"],["mat-icon-button","","disabled",""],[1,"col-input","hide-edit"],["type","text","onpaste","false;",3,"id","value","keypress"],[1,"col-btn-save","hide-edit"],["mat-icon-button","","color","primary","aria-label","Example icon-button with a heart icon",3,"click"],[1,"col-btn-cancel","hide-edit"],["mat-icon-button","","color","warn","aria-label","Example icon-button with a heart icon",3,"click"],["matTreeNodePadding","",2,"border","1px solid black",3,"contextmenu"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(o,a){if(1&o&&(e._UZ(0,"div",0),e.TgZ(1,"mat-menu",null,1),e.YNc(3,_e,12,0,"ng-template",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"i",6),e._uU(8,"text_fields"),e.qZA()(),e.TgZ(9,"h4",7),e._uU(10),e.qZA()(),e.TgZ(11,"div",8),e.YNc(12,me,4,0,"table",9),e.TgZ(13,"mat-tree",10),e.YNc(14,pe,19,5,"mat-tree-node",11),e.YNc(15,he,12,4,"mat-tree-node",12),e.qZA()()()),2&o){var t,n=e.MAs(2);e.Udp("left",a.menuTopLeftPosition.x)("top",a.menuTopLeftPosition.y),e.Q6J("matMenuTriggerFor",n),e.xp6(10),e.hij(" Total fields: ",null!==(t=null==a.dataSource.data[a.dataSource.data.length-1]?null:a.dataSource.data[a.dataSource.data.length-1].position)&&void 0!==t?t:"0"," "),e.xp6(2),e.Q6J("ngIf",0===a.dataSource.data.length),e.xp6(1),e.Q6J("dataSource",a.dataSource)("treeControl",a.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",a.hasChild)}},directives:[M.p6,M.VK,M.KA,M.OP,f.O5,F.xr,T.gi,T.fQ,T.uo,T.ah,N.lW,D.Hw,T.eu],styles:[".row-field[_ngcontent-%COMP%] {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.col-btn-toggle[_ngcontent-%COMP%] {\r\n    width: 50px;\r\n    border-right: 1px solid black;\r\n}\r\n\r\n.col-field-index[_ngcontent-%COMP%] {\r\n    width: 100px;\r\n    height: 100%;\r\n    text-align: center;\r\n    border-right: 1px solid black;\r\n    font-weight: 400;\r\n}\r\n\r\n.col-field-value[_ngcontent-%COMP%] {\r\n    width: 80%;\r\n    font-weight: 400;\r\n}\r\n\r\n.col-input[_ngcontent-%COMP%] {\r\n    padding-left: 40px;\r\n}\r\n\r\n.hide-edit[_ngcontent-%COMP%] {\r\n    display: none;\r\n}"]}),r}(),ve=function(){var r=function(c){(0,Z.Z)(a,c);var o=(0,w.Z)(a);function a(n,t,i,s,l,u,g){var d;return(0,y.Z)(this,a),(d=o.call(this))._getMessageUseCase=n,d._getGroupUseCase=t,d._store=i,d._snackBar=s,d._route=l,d._injector=u,d._cdr=g,d.user={},d.group_id="",d.selected_segment="",d.selected_message_position=0,d.selected_segment_position=0,d.columnsTableSegment=["position","segment","segment value"],d.flagSearch=!1,d.columnsTableMessage=["position","message","download"],d.columnsTableField=["position","title field","field value"],d.menuTopLeftPosition={x:"0",y:"0"},d.filterGetMessagesValue=!1,d.filters=[],d.loading=!0,d.page_size=10,d.page_num=1,d.horizontalPosition="left",d.verticalPosition="bottom",d._transformer=function(m,h){return{value:m.value,segment:m.segment,position:m.position,field_index:m.field_index,index:m.index,level:h,expandable:!!m.children&&m.children.length>0}},d.treeControl=new R.C2(function(m){return m.level},function(m){return m.expandable}),d.treeFlattener=new T.JZ(d._transformer,function(m){return m.level},function(m){return m.expandable},function(m){return m.children}),d.dataSource=new T.kc(d.treeControl,d.treeFlattener),d.hasChild=function(m,h){return h.expandable},d}return(0,b.Z)(a,[{key:"ngOnInit",value:function(){this._initialize()}},{key:"ngAfterViewInit",value:function(){this.executeToken()}},{key:"ngOnDestroy",value:function(){this._finalize()}},{key:"handleDumbMessage",value:function(t,i){switch(t){case p.DOWNLOAD_MESSAGE:this._downloadMessage(i);break;case p.DOWNLOAD_ALL_MESSAGES:this._downloadAllMessage();break;case p.SELECT_SEGMENT:this._clickPrincipal(i.payload);break;case p.SAVE_VALUE:this._saveValue(i);break;case p.SEND_FILTER:this._buildFilter(i);break;case p.SEND_FREE_TEXT_FILTER:this._buildFreeTextFilter(i);break;case p.REMOVE_FILTER:this._removeFilter(i);break;case p.REMOVE_ALL_FILTERS:this._removeAllFilters();break;case p.SELECT_MESSAGE:this._selectMessage(i)}}},{key:"_selectMessage",value:function(t){this.selected_message_position=t.payload,this.segments=this.messages[t.payload].segments,this.mainMessageTable={headerRow:["No.","Segment","Segment value"],dataRows:this.segments},this.fields=this.segments[0].fields,this.selected_segment=this.segments[0].title_segment,this.dataSourceTableSegment=this.segments,this.dataSourceTableField=this.fields}},{key:"_downloadMessage",value:function(t){var i="".concat(q.N.url_back,"/app/message/messages/download_message_with_id?group_id=").concat(this.group_id,"&user_id=").concat(this.user.id,"&id=").concat(t.payload);window.open(i,"_blank")}},{key:"_downloadAllMessage",value:function(){var t=this._getGroupUseCase.downloadGroupMessages(this.user.id,this.group_id);window.open(t,"_blank")}},{key:"_removeFilter",value:function(t){k().fire({title:"Please wait",allowOutsideClick:!1,allowEscapeKey:!1}),k().showLoading(),this.array_filters.filters=this.array_filters.filters.filter(function(i,s){return s!==t.payload}),this.filters=this.filters.filter(function(i,s){return s!==t.payload}),this.resetToken()}},{key:"_removeAllFilters",value:function(){this.array_filters.filters=[],this.filters=[],this.resetToken()}},{key:"_buildFreeTextFilter",value:function(t){k().fire({title:"Please wait",allowOutsideClick:!1,allowEscapeKey:!1}),k().showLoading(),this.array_filters.filters.push({free_text_search:{value:t.payload,user_id:this.user.id,group_id:this.group_id,name_filter:"free_text_search"}}),this.filters.push({value:t.payload,index:"Text",name:"free_text_search"}),this.resetToken()}},{key:"_buildFilter",value:function(t){switch(k().fire({title:"Please wait",allowOutsideClick:!1,allowEscapeKey:!1}),k().showLoading(),console.log("asdasdasda"),t.payload.name_filter){case"search_by_field_value":this.array_filters.filters.push(this._buildFilterSearchByFieldValue(t)),this.filters.push({value:t.payload.item.content.value,name:"search_by_field_value",index:t.payload.item.content.index,position:"a"});break;case"search_by_component_value":this.array_filters.filters.push(this._buildFilterSearchByComponentValue(t)),this.filters.push({value:t.payload.item.content.value,name:"search_by_component_value",index:t.payload.item.content.index});break;case"search_by_subcomponent_value":this.array_filters.filters.push(this._buildFilterSearchBySubComponentValue(t)),this.filters.push({value:t.payload.item.content.value,name:"search_by_subcomponent_value",index:t.payload.item.content.index});break;case"free_text_search":this.array_filters.filters.push(this._buildFilterSearchByFreeText(t)),this.filters.push({value:t.payload.item.content.value,name:"free_text_search",index:t.payload.item.content.index});break;case"search_by_value_segment":this.array_filters.filters.push(this._buildFilterSearchByValueSegment(t)),this.filters.push({value:t.payload.item.content.value,name:"search_by_value_segment",index:t.payload.item.content.index})}this.resetToken()}},{key:"_buildFilterSearchByFieldValue",value:function(t){return{search_by_field_value:{value:t.payload.item.content.value,segment:t.payload.item.content.segment,position:t.payload.item.content.position,user_id:this.user.id,group_id:this.group_id,name_filter:"search_by_field_value"}}}},{key:"_buildFilterSearchByComponentValue",value:function(t){return{search_by_component_value:{value:t.payload.item.content.value,segment:t.payload.item.content.segment,position:t.payload.item.content.position,user_id:this.user.id,group_id:this.group_id,name_filter:"search_by_component_value"}}}},{key:"_buildFilterSearchBySubComponentValue",value:function(t){return{search_by_subcomponent_value:{value:t.payload.item.content.value,segment:t.payload.item.content.segment,position:t.payload.item.content.position,user_id:this.user.id,group_id:this.group_id,name_filter:"search_by_subcomponent_value"}}}},{key:"_buildFilterSearchByFreeText",value:function(t){return{free_text_search:{value:t.payload.item.content.value,segment:t.payload.item.content.segment,position:t.payload.item.content.position,user_id:this.user.id,group_id:this.group_id,name_filter:"free_text_search"}}}},{key:"_buildFilterSearchByValueSegment",value:function(t){return{search_by_value_segment:{value:t.payload.item.content.value,segment:t.payload.item.content.segment,position:t.payload.item.content.position,user_id:this.user.id,group_id:this.group_id,name_filter:"search_by_value_segment"}}}},{key:"_saveValue",value:function(t){if(0==t.payload.item.content.level){this.fields[t.payload.item.content.position-1].field=t.payload.input.value;var i=this.fields.map(function(d){return d.field}).join("|");i=i.substring(1),this.messages[this.selected_message_position].segments[this.selected_segment_position].segment=i=t.payload.item.content.segment+i,this.updateMessage()}if(1==t.payload.item.content.level){this.fields[t.payload.item.content.field_index-1].components[t.payload.item.content.position-1].component=t.payload.input.value;var l=this.fields[t.payload.item.content.field_index-1].field.split("^");l[t.payload.item.content.position-1]=t.payload.input.value;var u=l.join("^");this.fields[t.payload.item.content.field_index-1].field=u;var g=this.fields.map(function(d){return d.field}).join("|");0==this.selected_segment_position?(g=g.substring(1),g=t.payload.item.content.segment+g):g=t.payload.item.content.segment+"|"+g,this.messages[this.selected_message_position].segments[this.selected_segment_position].segment=g,this.updateMessage()}2==t.payload.item.content.level&&(this.fields[t.payload.item.content.field_index-1].components[t.payload.item.content.position-1].component=t.payload.input.value)}},{key:"injector",value:function(){return this._injector}},{key:"_initialize",value:function(){this.getUserState(),this.getIdGroup(),this.array_filters={filters:[],user_id:this.user.id,group_id:this.group_id,page_size:this.page_size,page_num:this.page_num},this.messagePagingTable={headerRow:["No.","Message","Download"],dataRows:[]},this.mainMessageTable={headerRow:["No.","Segment","Segment value"],dataRows:[]},$("#datatables").DataTable({pagingType:"full_numbers",lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],responsive:!0,language:{search:"_INPUT_",searchPlaceholder:"Search records"}});var t=$("#datatables").DataTable();this.buildPager(),t.on("click",".edit",function(i){var s=$(this).closest("tr");$(s).hasClass("child")&&(s=s.prev(".parent"));var l=t.row(s).data();alert("You press on Row: "+l[0]+" "+l[1]+" "+l[2]+"'s row."),i.preventDefault()}),t.on("click",".remove",function(i){var s=$(this).closest("tr");t.row(s).remove().draw(),i.preventDefault()}),t.on("click",".like",function(i){alert("You clicked on Like button"),i.preventDefault()}),$(".card .material-datatables label").addClass("form-group"),$(".datatables_info").addClass("remove")}},{key:"_finalize",value:function(){}},{key:"_clickPrincipal",value:function(t){this.selected_segment_position=t,this.segments=this.messages[0].segments,this.fields=this.segments[t].fields,this.selected_segment=this.segments[t].title_segment}},{key:"getUserState",value:function(){this.user=JSON.parse(localStorage.getItem("auth"))}},{key:"getIdGroup",value:function(){var t=this;this._route.params.subscribe(function(i){t.group_id=i.group_id})}},{key:"send_filters",value:function(){var t=this;this._getMessageUseCase.getFiltersMessages(this.array_filters,this.user.id,this.group_id,this.page_num,this.page_size,this.recaptchaToken).subscribe(function(i){i.messages.length>0?(k().close(),t.pagination=i.pagination,t.messagesPrincipal=i.messages,t.messagesPrincipalLength=t.messagesPrincipal.length,t.messages=i.messages,t.segments=t.messages[0].segments,t.fields=t.segments[0].fields,t.selected_segment=t.segments[0].title_segment,t.dataSourceTableMessage=t.messagesPrincipal,t.dataSourceTableSegment=t.segments,t.dataSourceTableField=t.fields,t.messagePagingTable={headerRow:["No.","Message","Download"],dataRows:i.messages},t.mainMessageTable={headerRow:["No.","Segment","Segment value"],dataRows:t.segments}):(t.messagePagingTable={headerRow:["No.","Message","Download"],dataRows:[]},t.mainMessageTable={headerRow:["No.","Segment","Segment value"],dataRows:[]},t.fields=[],t._showSwal("success-message","No messages found","The search criteria was not found").then(function(){t.array_filters.filters=t.array_filters.filters.filter(function(s,l){return l!==t.array_filters.filters.length-1}),t.filters=t.filters.filter(function(s,l){return l!==t.filters.length-1}),t.resetToken()})),t.buildPager()})}},{key:"clickMessages",value:function(t){var i;this.selected_message_position=t,this.segments=this.messages[t].segments,this.mainMessageTable={headerRow:["No.","Segment","Segment value"],dataRows:this.segments},this.fields=this.segments[0].fields,this.selected_segment=this.segments[0].title_segment,this.dataSourceTableSegment=this.segments,this.dataSourceTableField=this.fields,null===(i=document.getElementById("message-"+t.toString()))||void 0===i||i.classList.toggle("active")}},{key:"searchValue",value:function(){var t=this;this._getMessageUseCase.getSearchMessages(this.user.id,this.group_id,this.search).subscribe(function(i){t.messagesSearchValue=i,t.messages=t.messagesSearchValue,t.segments=t.messages[0].segments,t.fields=t.segments[0].fields,t.dataSourceTableMessage=t.messages,t.dataSourceTableSegment=t.segments,t.dataSourceTableField=t.fields,t.flagSearch=!0})}},{key:"replaceValue",value:function(t){var u=null==t?void 0:t.replace("^","\\^"),g=null==u?void 0:u.replace("~","\\~");return null==g?void 0:g.replace("&","\\&")}},{key:"cleanSearch",value:function(){this.flagSearch=!1,this.messages=this.messagesPrincipal,this.segments=this.messages[0].segments,this.fields=this.segments[0].fields,this.dataSourceTableMessage=this.messages,this.dataSourceTableSegment=this.segments,this.dataSourceTableField=this.fields}},{key:"loadfilterGetMessagesValue",value:function(t){this.filterGetMessagesValueData=t,this.messages=this.filterGetMessagesValueData,this.segments=this.messages[0].segments,this.fields=this.segments[0].fields,this.dataSourceTableMessage=this.messages,this.dataSourceTableSegment=this.segments,this.dataSourceTableField=this.fields}},{key:"free_text_search_filter",value:function(){this.array_filters.filters.push({free_text_search:{value:this.search,user_id:this.user.id,group_id:this.group_id,name_filter:"free_text_search"}}),this.filters.push({value:this.search,name:"free_text_search"}),this.send_filters()}},{key:"free_text_search_filter_with_rigth_click",value:function(t){var i=t.content.value;this.array_filters.filters.push({free_text_search:{value:i,user_id:this.user.id,group_id:this.group_id,name_filter:"free_text_search"}}),this.filters.push({value:i,name:"free_text_search"}),this.send_filters()}},{key:"search_filter_by_value_segment",value:function(t){var i=t.content.value;this.array_filters.filters.push({search_by_value_segment:{value:i,segment:t.content.segment,user_id:this.user.id,group_id:this.group_id,name_filter:"search_by_value_segment"}}),this.filters.push({value:i,name:"search_by_value_segment",index:t.content.index}),this.send_filters()}},{key:"search_filter_by_field_value",value:function(t){var i=t.content.value;this.array_filters.filters.push({search_by_field_value:{value:i,segment:t.content.segment,position:t.content.position,user_id:this.user.id,group_id:this.group_id,name_filter:"search_by_field_value"}}),this.filters.push({value:i,name:"search_by_field_value",index:t.content.index}),this.send_filters()}},{key:"search_filter_by_component_value",value:function(t){var i=t.content.value;this.array_filters.filters.push({search_by_component_value:{value:i,segment:t.content.segment,position:t.content.position,user_id:this.user.id,group_id:this.group_id,name_filter:"search_by_component_value"}}),this.filters.push({value:i,name:"search_by_component_value",index:t.content.index}),this.send_filters()}},{key:"search_filter_by_subcomponent_value",value:function(t){var i=t.content.value;this.array_filters.filters.push({search_by_subcomponent_value:{value:i,segment:t.content.segment,position:t.content.position,user_id:this.user.id,group_id:this.group_id,name_filter:"search_by_subcomponent_value"}}),this.filters.push({value:i,name:"search_by_subcomponent_value",index:t.content.index}),this.send_filters()}},{key:"remove_filter",value:function(t){this.array_filters.filters.splice(t,1),this.filters.splice(t,1),this.send_filters()}},{key:"getServerData",value:function(t){this.page_num=t,this.page_size=this.page_size,this.array_filters.page_size=this.page_size,this.array_filters.page_num=this.page_num,this.send_filters()}},{key:"change",value:function(t){var i;t.target.value>(null===(i=this.pagination)||void 0===i?void 0:i.countPages)||t.target.value<1?(this.errorAudio(),this._snackBar.open("Page number exceeded","Close",{horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})):(this.paginator.pageIndex=t.target.value-1,this.page_num=t.target.value,this.array_filters.page_num=this.page_num,this.send_filters(),this.successAudio(),this._snackBar.open("Success","Close",{horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition}))}},{key:"successAudio",value:function(){var t=new Audio;t.src="assets/audios/success.mp3",t.load(),t.play()}},{key:"errorAudio",value:function(){var t=new Audio;t.src="assets/audios/error.mp3",t.load(),t.play()}},{key:"disableButtons",value:function(t){var i,s,l,u,g;t.content.expandable&&(null===(i=document.getElementById("edit_value"))||void 0===i||i.setAttribute("disabled","")),0==t.content.level&&(null===(s=document.getElementById("search_filter_by_component_value"))||void 0===s||s.setAttribute("disabled",""),null===(l=document.getElementById("search_filter_by_subcomponent_value"))||void 0===l||l.setAttribute("disabled","")),1==t.content.level&&(null===(u=document.getElementById("search_filter_by_field_value"))||void 0===u||u.setAttribute("disabled",""),null===(g=document.getElementById("search_filter_by_subcomponent_value"))||void 0===g||g.setAttribute("disabled",""))}},{key:"editValue",value:function(t){var i,s,l,u,g=null===(i=document.getElementById(t.content.index))||void 0===i?void 0:i.childNodes[0].childNodes[2],d=null===(s=document.getElementById(t.content.index))||void 0===s?void 0:s.childNodes[0].childNodes[3],m=null===(l=document.getElementById(t.content.index))||void 0===l?void 0:l.childNodes[0].childNodes[4],h=null===(u=document.getElementById(t.content.index))||void 0===u?void 0:u.childNodes[0].childNodes[5];g.classList.toggle("hide-edit"),d.classList.toggle("hide-edit"),m.classList.toggle("hide-edit"),h.classList.toggle("hide-edit")}},{key:"check",value:function(t){var i=document.all?t.keyCode:t.which;if(8==i)return!0;var l=String.fromCharCode(i);return/[A-Za-z0-9]/.test(l)}},{key:"updateMessage",value:function(){var i,s,t=this,l=null===(i=this.messages[this.selected_message_position].segments)||void 0===i?void 0:i.map(function(g){var d;return null===(d=g.segment)||void 0===d?void 0:d.replace("\\","\\")}).join("\r"),u={user_id:this.user.id,group_id:this.group_id,message_id:this.messages[this.selected_message_position].id,message_oid:null===(s=this.messages[this.selected_message_position]._id)||void 0===s?void 0:s.$oid,message:l};this._getMessageUseCase.updateMesssage(u).subscribe(function(g){g.success&&(t.successAudio(),t._snackBar.open("Success","Close",{horizontalPosition:t.horizontalPosition,verticalPosition:t.verticalPosition}))})}},{key:"buildPager",value:function(){var i,t=this,s=document.getElementsByClassName("pagination")[0];s.innerHTML="";var l=document.createElement("li");l.classList.add("paginate_button"),l.classList.add("page-item"),l.classList.add("previous");var u=document.createElement("a");u.classList.add("page-link"),u.innerText="Previous",l.appendChild(u);var g=document.createElement("li");g.classList.add("paginate_button"),g.classList.add("page-item"),g.classList.add("next");var d=document.createElement("a");d.classList.add("page-link"),d.innerText="Next",g.appendChild(d),s.appendChild(l);for(var m=function(P){var C=document.createElement("li"),x=document.createElement("a");x.setAttribute("id","".concat(P+1)),x.addEventListener("click",function(Ae){Array.from(document.querySelectorAll(".page-item")).forEach(function(Oe){Oe.classList.remove("active")}),t.getServerData(Ae.target.id),x.parentElement.classList.toggle("active")}),0==P?(C.classList.add("paginate_button"),C.classList.add("page-item"),C.classList.add("active"),x.classList.add("page-link"),x.innerText="".concat(P+1),C.appendChild(x),s.appendChild(C)):(C.classList.add("paginate_button"),C.classList.add("page-item"),x.classList.add("page-link"),x.innerText="".concat(P+1),C.appendChild(x),s.appendChild(C))},h=0;h<(null===(i=this.pagination)||void 0===i?void 0:i.countPages);h++)m(h);s.appendChild(g)}},{key:"executeToken",value:function(){this.recaptcha.execute()}},{key:"resetToken",value:function(){this.recaptcha.reset(),this.executeToken()}},{key:"getToken",value:function(t){this.recaptchaToken=t,this.send_filters()}},{key:"_showSwal",value:function(t,i,s){if("success-message"==t)return k().fire({title:i,text:s,buttonsStyling:!1,customClass:{confirmButton:"btn btn-info"},icon:"error"})}}]),a}(U.c);return r.\u0275fac=function(o){return new(o||r)(e.Y36(z),e.Y36(V),e.Y36(Y.yh),e.Y36(H.ux),e.Y36(G.gz),e.Y36(e.zs3),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-message-display-container"]],viewQuery:function(o,a){var n;1&o&&(e.Gf(M.p6,7),e.Gf(M.p6,7),e.Gf(I.w,7),e.Gf(B.NW,5)),2&o&&(e.iGM(n=e.CRH())&&(a.matMenuTrigger=n.first),e.iGM(n=e.CRH())&&(a.matMenuMessageTrigger=n.first),e.iGM(n=e.CRH())&&(a.recaptcha=n.first),e.iGM(n=e.CRH())&&(a.paginator=n.first))},features:[e.qOj],decls:9,vars:11,consts:[[1,"main-content"],[1,"container-fluid"],[3,"smartComponent","filterQueue"],[3,"smartComponent","mainMessageTable"],[1,"row"],[1,"col-md-4",3,"smartComponent","messagePagingTable","pagination"],[1,"col-md-8",3,"smartComponent","fields","selected_segment","pagination"],[3,"token"]],template:function(o,a){1&o&&(e.TgZ(0,"article",0)(1,"section",1),e._UZ(2,"app-filter-view",2)(3,"app-main-table-messages",3),e.TgZ(4,"section",4),e._UZ(5,"app-message-paging-table",5)(6,"app-field-tree-segment",6),e.qZA(),e.TgZ(7,"div")(8,"app-recaptcha",7),e.NdJ("token",function(t){return a.getToken(t)}),e.qZA()()()()),2&o&&(e.xp6(2),e.Q6J("smartComponent",a)("filterQueue",a.filters),e.xp6(1),e.Q6J("smartComponent",a)("mainMessageTable",a.mainMessageTable),e.xp6(2),e.Q6J("smartComponent",a)("messagePagingTable",a.messagePagingTable)("pagination",a.pagination),e.xp6(1),e.Q6J("smartComponent",a)("fields",a.fields)("selected_segment",a.selected_segment)("pagination",a.pagination))},directives:[ee,se,ge,fe,I.w],styles:[""]}),r}(),v=function(){return(r=v||(v={})).VIEW_GROUP="VIEW_GROUP",r.DELETE_GROUP="DELETE_GROUP",r.DOWNLOAD_GROUP="DOWNLOAD_GROUP",r.UPDATE_GROUP_NAME="UPDATE_GROUP_NAME",v;var r}(),be=_(29434),ye=_(40520);function Te(r,c){1&r&&e._UZ(0,"ngx-skeleton-loader",10)}function Ce(r,c){1&r&&(e.TgZ(0,"div",11),e._UZ(1,"img",12),e.qZA())}function xe(r,c){if(1&r){var o=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"h5",17),e._uU(5),e.qZA(),e.TgZ(6,"input",18),e.NdJ("keyup.enter",function(){var s=e.CHM(o).index;return e.oxw().saveName(s)}),e.qZA(),e.TgZ(7,"a",19),e._uU(8),e.qZA(),e.TgZ(9,"a",20),e.NdJ("click",function(){var s=e.CHM(o).index;return e.oxw().saveName(s)}),e.TgZ(10,"i",21),e._uU(11,"save"),e.qZA()(),e.TgZ(12,"a",22),e.NdJ("click",function(){var s=e.CHM(o).index;return e.oxw().editName(s)}),e.TgZ(13,"i",21),e._uU(14,"edit"),e.qZA()(),e.TgZ(15,"a",23)(16,"i",21),e._uU(17,"keyboard_arrow_down"),e.qZA()()()(),e.TgZ(18,"div",24)(19,"div",25)(20,"p"),e._uU(21),e.qZA(),e.TgZ(22,"button",26),e.NdJ("click",function(i){var l=e.CHM(o).$implicit;return e.oxw().viewGroupMessages(i,l.id)}),e._uU(23," View "),e.qZA(),e.TgZ(24,"button",27),e.NdJ("click",function(i){var l=e.CHM(o).$implicit;return e.oxw().downloadGroupMessages(i,l.id)}),e._uU(25," Download "),e.qZA(),e.TgZ(26,"button",28),e.NdJ("click",function(i){var l=e.CHM(o).$implicit;return e.oxw().deleteGroupMessages(i,l.id)}),e._uU(27," Delete "),e.qZA()()()()()}if(2&r){var a=c.$implicit,n=c.index;e.xp6(2),e.MGl("id","heading-",n,""),e.xp6(2),e.MGl("id","txt-custom-name-",n,""),e.xp6(1),e.Oqu(a.custom_name),e.xp6(1),e.MGl("id","input-edit-",n,""),e.s9C("value",a.custom_name),e.xp6(2),e.hij("Total Messages: ",a.total_messages,""),e.xp6(7),e.MGl("href","#collapse-",n,"",e.LSH)("aria-controls","collapse-",n,""),e.xp6(3),e.MGl("id","collapse-",n,"")("aria-labelledby","heading-",n,""),e.xp6(3),e.Oqu(a.id),e.xp6(5),e.uIk("id",a.id)}}var Me=function(){var r=function(c){(0,Z.Z)(a,c);var o=(0,w.Z)(a);function a(){var n;return(0,y.Z)(this,a),(n=o.call(this)).skeleton=!0,n.skeleton=!0,n}return(0,b.Z)(a,[{key:"ngOnChanges",value:function(t){this.skeleton=!1}},{key:"ngAfterViewInit",value:function(){(0,E.Z)((0,A.Z)(a.prototype),"init",this).call(this)}},{key:"ngOnDestroy",value:function(){}},{key:"getSmartComponent",value:function(){return this.smartComponent}},{key:"viewGroupMessages",value:function(t,i){this.emit(v.VIEW_GROUP,i)}},{key:"downloadGroupMessages",value:function(t,i){this.emit(v.DOWNLOAD_GROUP,i)}},{key:"deleteGroupMessages",value:function(t,i){this.emit(v.DELETE_GROUP,{event:t,groupId:i})}},{key:"editName",value:function(t){var i=document.getElementById("input-edit-"+t),s=document.getElementById("txt-custom-name-"+t);i.classList.remove("input-edit-name"),s.style.display="none",i.focus()}},{key:"saveName",value:function(t){this.emit(v.UPDATE_GROUP_NAME,t);var i=document.getElementById("input-edit-"+t),s=document.getElementById("txt-custom-name-"+t);i.classList.add("input-edit-name"),s.style.display="block"}}]),a}(O.G);return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-groups-message-list"]],inputs:{smartComponent:"smartComponent",groups:"groups"},features:[e.qOj,e.TTD],decls:11,vars:3,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"container","card-body","col-md-12"],["count","3",4,"ngIf"],["class","text-center",4,"ngIf"],["id","accordion","role","tablist",1,"row","gx-5"],["class","col-md-4",4,"ngFor","ngForOf"],["count","3"],[1,"text-center"],["src","/assets/img/svg/no_data.svg","alt","no_data",1,"img-thumbnail"],[1,"col-md-4"],[1,"card-collapse"],["role","tab",1,"card-header",3,"id"],[1,"header-collapse"],[1,"mb-0",3,"id"],[1,"input-edit-name",3,"id","value","keyup.enter"],["href","javascript:void(0)"],[1,"icon-save",3,"click"],[1,"material-icons"],[1,"icon-edit",3,"click"],["data-toggle","collapse","aria-expanded","false",1,"collapsed",3,"href","aria-controls"],["role","tabpanel","data-parent","#accordion",1,"collapse",3,"id","aria-labelledby"],[1,"card-body"],[1,"btn","btn-dark",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Uploaded message files"),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,Te,1,0,"ngx-skeleton-loader",6),e.YNc(8,Ce,2,0,"div",7),e.TgZ(9,"div",8),e.YNc(10,xe,28,12,"div",9),e.qZA()()()()()),2&o&&(e.xp6(7),e.Q6J("ngIf",!a.groups.length),e.xp6(1),e.Q6J("ngIf",0==a.groups.length),e.xp6(2),e.Q6J("ngForOf",a.groups))},directives:[f.O5,F.xr,f.sg],styles:[".header-collapse[_ngcontent-%COMP%] {\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n}\r\n\r\n.input-edit-name[_ngcontent-%COMP%] {\r\n    display: none;\r\n}"]}),r}(),ke=function(){var r=function(c){(0,Z.Z)(a,c);var o=(0,w.Z)(a);function a(n,t,i,s,l){var u;return(0,y.Z)(this,a),(u=o.call(this))._getGroupUseCase=n,u._getUserUseCase=t,u._router=i,u._injector=s,u._http=l,u.user={},u}return(0,b.Z)(a,[{key:"ngOnInit",value:function(){this._initialize()}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._finalize()}},{key:"handleDumbMessage",value:function(t,i){switch(t){case v.VIEW_GROUP:this._viewGroupMessages(i.payload);break;case v.DOWNLOAD_GROUP:this._downloadGroupMessages(i.payload);break;case v.DELETE_GROUP:this._deleteGroupMessages(i.payload);break;case v.UPDATE_GROUP_NAME:this._updateGroupName(i.payload)}}},{key:"injector",value:function(){return this._injector}},{key:"_initialize",value:function(){this.getUserState(),this.getGroupsForUser()}},{key:"_finalize",value:function(){}},{key:"_updateGroupName",value:function(t){var i=document.getElementById("input-edit-"+t).value;this.groups[t].custom_name=i,this._getGroupUseCase.updateGroupName(this.groups[t].id,this.user.id,i).subscribe(function(l){})}},{key:"getUserState",value:function(){this.user=JSON.parse(localStorage.getItem("auth"))}},{key:"getGroupsForUser",value:function(){var t=this;this.subscription=this._getGroupUseCase.getGroupsForUser(this.user.id).subscribe(function(i){t.groups=i})}},{key:"_viewGroupMessages",value:function(t){this._router.navigateByUrl(1!=this.user.type_user?"/messages/message-groups/".concat(t):"/admin/messages/message-groups/".concat(t))}},{key:"_downloadGroupMessages",value:function(t){var i=this._getGroupUseCase.downloadGroupMessages(this.user.id,t);window.open(i,"_blank")}},{key:"_deleteGroupMessages",value:function(t){var i=this;this._getGroupUseCase.deleteGroupMessages(this.user.id,t.event.target.id).subscribe(function(l){l.success&&i.groups.splice(t.groupId,1)})}}]),a}(U.c);return r.\u0275fac=function(o){return new(o||r)(e.Y36(V),e.Y36(be.f),e.Y36(G.F0),e.Y36(e.zs3),e.Y36(ye.eN))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-groups-message-container"]],features:[e.qOj],decls:3,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],[3,"smartComponent","groups"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-groups-message-list",2),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("smartComponent",a)("groups",a.groups))},directives:[Me],styles:[""]}),r}(),we=[{path:"",children:[{path:"upload-file",component:_(27954).d},{path:"message-groups",component:ke},{path:"message-groups/:group_id",component:ve}]}],Se=_(39152),Ee=function(){var r=(0,b.Z)(function c(){(0,y.Z)(this,c)});return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.ez,Se.m,G.Bz.forChild(we)]]}),r}()}}]);